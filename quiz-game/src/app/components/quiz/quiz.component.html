
<div class="game_container">

<div class="top-tools">
  <!-- Lifeline Section -->
  <div class="lifelines">
    <button 
      [disabled]="lifelinesUsed.fiftyFifty" 
      (click)="useFiftyFifty()" 
      class="lifeline-button"
      title="50:50 - Ø¥Ø²Ø§Ù„Ø© Ø¥Ø¬Ø§Ø¨ØªÙŠÙ† Ø®Ø§Ø·Ø¦ØªÙŠÙ†">
      ðŸ§© 50:50
    </button>
    <button 
      [disabled]="lifelinesUsed.phoneFriend" 
      (click)="usePhoneFriend()" 
      class="lifeline-button"
      title="Ø§ØªØµÙ„ Ø¨ØµØ¯ÙŠÙ‚">
      ðŸ“ž ØµØ¯ÙŠÙ‚
    </button>
    <button 
      [disabled]="lifelinesUsed.audiencePoll" 
      (click)="useAudiencePoll()" 
      class="lifeline-button"
      title="ØªØµÙˆÙŠØª Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±">
      ðŸ‘¥ Ø¬Ù…Ù‡ÙˆØ±
    </button>
  </div>
</div>

<div *ngIf="showPopup" class="floating-popup-overlay" (click)="closePopup()">
  <div class="floating-popup" (click)="$event.stopPropagation()">
    <h3>{{ popupTitle }}</h3>

    <!-- Audience Poll -->
    <div *ngIf="popupType === 'audiencePoll'" class="poll-results">
      <div *ngFor="let option of audiencePollData" class="poll-bar-container">
        <span class="poll-option">Ø®ÙŠØ§Ø± {{ option.optionNumber }}</span>
        <div class="poll-bar" [style.width]="option.percentage + '%'"></div>
        <span class="poll-percentage">{{ option.percentage }}%</span>
      </div>
    </div>

    <!-- Phone Friend -->
    <div *ngIf="popupType === 'phoneFriend'" class="phone-friend-result">
      <p>{{ popupContent }}</p>
    </div>

    <button class="close-button" (click)="closePopup()">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>


<div class="quiz-container" *ngIf="!gameOver; else gameOverTemplate">
  <!-- Question Title -->
  <div class="question-header">
    <h1>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…Ù„ÙŠÙˆÙ†</h1>
    <h2>Ø§Ù„Ø³Ø¤Ø§Ù„ {{ currentQuestionIndex + 1 }} Ù…Ù† {{ totalQuestions }}</h2>
  </div>

  <!-- Question Content -->
  <p class="question">{{ currentQuestion?.question }}</p>

  <!-- Options with Numbers -->
  <div class="options">
    <button *ngFor="let opt of displayedOptions; let i = index"
            class="option-button"
            [ngClass]="{
              'selected-pending': selectedIndex === i && pendingCheck,
              'correct-answer': showResult && opt === currentQuestion.answer,
              'wrong-answer': showResult && selectedIndex === i && opt !== currentQuestion.answer
            }"
            (click)="selectAnswer(i)"
            [disabled]="pendingCheck || showResult">
      <span class="option-number">{{ i + 1 }}.</span> <!-- Displaying option number -->
      {{ opt }}
    </button>
  </div>
</div>
</div>


<!-- Game Over Section -->
<ng-template #gameOverTemplate>
  <div class="game-over-screen">
    <h1>ðŸŽ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø© ðŸŽ‰</h1>
    <p *ngIf="currentQuestionIndex >= totalQuestions">
      ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø£Ø¬Ø¨Øª Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!
    </p>
    <p *ngIf="currentQuestionIndex < totalQuestions">
      Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ <strong>{{ currentQuestionIndex + 1 }}</strong>.
    </p>
    <button (click)="restart()" class="restart-button">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨ ðŸ”„</button>
  </div>

  <!-- Hidden YouTube Players -->
  <div id="playerStart" style="display:none;"></div>
  <div id="playerSuspense" style="display:none;"></div>
  <div id="playerWrong" style="display:none;"></div>
  <div id="playerWaiting" style="display:none;"></div>
  <div id="playerCorrect" style="display:none;"></div>
</ng-template>
